<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 	
	"-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kosaShoppingMall.mapper.EmployeeShipMapper">
<sql id="baseColumns">
emp_id empId, emp_pw empPw, emp_name empName, emp_addr empAddr, emp_phone empPhone, emp_email empEmail
</sql>

<sql id="baseColumns1">
emp_id, emp_pw, emp_name, emp_addr, emp_phone, emp_email
</sql>

<sql id="AutoNum">
	select nvl(max(substr(MEMber_NUM,5)),100000) + 1 from member
</sql>
<update id="updatePassword" 
	parameterType="memDTO">
	update member
	set member_pw = #{memberPw}
	where member_id = #{memberId}
</update>
<delete id="memberDrop" parameterType="string">
	delete from member
	where member_id = #{memberId}
</delete>
<update id="memberUpdate" parameterType="memDTO">
	update member
	set MEMber_NAME =#{memberName}, MEMber_PHONE = #{memberPhone},
	    MEMber_ADDR = #{memberAddr} , MEMber_EMAIL =#{memberEmail},
	    GENDER = #{gender}, MEMber_BIRTH = #{memberBirth} 
	where MEMber_NUM = #{memberNum}
</update>
<select id="selectOne" parameterType="string" 
	resultType="memDTO">
	select <include refid="baseColumns" />
	from member
	where member_id = #{memberId}
</select>

<insert id="memberInsert" 
	parameterType="memDTO">
insert into member( <include refid="baseColumns1" /> )
values(concat('kosa',( <include refid="AutoNum" /> )),
		#{memberId},#{memberPw},#{memberName},#{memberAddr},sysdate,
		#{gender},#{memberPhone},#{memberBirth},#{memberEmail})
</insert>
</mapper>