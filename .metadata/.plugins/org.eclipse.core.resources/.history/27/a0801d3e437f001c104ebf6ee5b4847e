<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 	
	"-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kosaShoppingMall.mapper.MemberMapper">

<sql id="baseColumns">
	member_num, member_id, member_pw, member_name, member_addr, member_regist, gender, member_phone, member_birth, member_email
</sql>	

<select id="numberGenerate" resultType="string">
select concat('kosa',nvl(max(substr(member_num,5)),100000) + 1) from member
</select>

<insert id = "memInsert" parameterType="memDTO">
	insert into member(<include refid="baseColumns"></include>)
	values(#{memNum}, #{memId}, #{memPw}, #{memName}, #{memAddr}, #{memRegist}, #{gender}, #{memPhone}, #{memBirth}, #{memEmail})		
</insert>

<select id="selectAll" resultType="memDTO">
	select member_num memNum, member_name memName, member_id memId, member_addr memAddr, member_phone memPhone
	from member
</select>

<select id="selectOne" parameterType="string" resultType="memDTO">
	select member_num memNum, member_name memName, member_id memId, member_addr memAddr, member_phone memPhone, member_regist memRegist, gender gender, member_birth memBirth, member_email memEmail, member_pw memPw
	from member
	where member_num = #{memNum}
</select>

<update id="memUpdate" parameterType="memDTO">
	update member
	set member_id = #{memId}, 
		member_pw = #{memPw}, 
		member_Name = #{memName}, 
		member_addr = #{memAddr}, 
		member_regist = #{memRegist}, 
		gender = #{gender}, 
		member_phone = #{memPhone}, 
		member_birth = #{memBirth}, 
		member_email = #{memEmail}
	where member_num = #{memNum}
</update>
</mapper>